/*
 * -------------------------------------------------
 * Juno/genome resource config 
 * -------------------------------------------------
 * Process resources for analyzing genomes on Juno 
 * -------------------------------------------------
 */

//------------- Read alignment

 process {
  withName:AlignReads {
    cpus = { 8 }
    memory = { 15.GB }
  }
  withName:MergeBams {
    cpus = { 8 }
    memory = { 1.GB }
  }
  withName:MarkDuplicates {
    cpus = { 2 }
    memory = { 5.GB }
    time = { 32.h * task.attempt }
  }
  withName:CreateRecalibrationTable {
    cpus = { 8 }
    memory = { 3.GB }
  }
  withName:RecalibrateBam {
    cpus = { 8 }
    memory = { 3.GB }
  }
  withName:Alfred {
    cpus = { 1 }
    memory = { 2.GB * task.attempt }
    time = { 6.h * task.attempt }
  }
  withName:CreateScatteredIntervals {
    cpus = { 1 }
    memory = { 1.GB * task.attempt }
  }
  withName:AggregateBamQc {
    cpus = { 1 }
    memory = { 1.GB * task.attempt }
  }

//------------- Somatic pipeline

  withName:SomaticDellyCall {
    cpus = { 1 }
    memory = { 16.GB * task.attempt }
    time = { 32.h * task.attempt }
  }
  withName:RunMutect2 {
    cpus = { 1 }
    memory = { 4.GB * task.attempt }
    time = { 3.h * task.attempt }
  }
  withName:SomaticCombineMutect2Vcf {
    cpus = { 1 }
    memory = { 1.GB * task.attempt }
  }
  withName:SomaticRunManta {
    cpus = { 8 }
    memory = { 2.GB * task.attempt }
    time = { 6.h * task.attempt }
  }
  withName:SomaticRunStrelka2 {
    cpus = { 8 }
    memory = { 1.GB * task.attempt }
    time = { 32.h * task.attempt }
  }
  withName:SomaticCombineChannel {
    cpus = { 1 }
    memory = { 4.GB * task.attempt } 
  }
  withName:SomaticAnnotateMaf {
    cpus = { 1 }
    memory = { 4.GB * task.attempt }
  }
  withName:SomaticFacetsAnnotation {
    cpus = { 1 }
    memory = { 1.GB * task.attempt }
  }
  withName:SomaticMergeDellyAndManta {
    cpus = { 1 }
    memory = { 1.GB * task.attempt }
  }
  withName:DoFacets {
    cpus = { 1 }
    memory = { 40.GB * task.attempt }
    time = { 32.h * task.attempt }
  }
  withName:RunMsiSensor {
    cpus = { 1 }
    memory = { 3.GB * task.attempt }
    time = { 6.h * task.attempt }
  }
  withName:RunPolysolver {
    cpus = { 8 }
    memory = { 1.GB * task.attempt }
    time = { 6.h * task.attempt }
  }
  withName:RunLOHHLA {
    cpus = { 1 }
    memory = { 3.GB * task.attempt }
    time = { 6.h * task.attempt }
  } 
  withName:RunMutationSignatures {
    cpus = { 1 }
    memory = { 1.GB * task.attempt }
  }
  withName:RunNeoantigen {
    cpus = { 1 }
    memory = { 8.GB * task.attempt }
    time = { 6.h * task.attempt }
  }
  withName:MetaDataParser {
    cpus = { 1 }
    memory = { 1.GB * task.attempt }
  }
  withName:SomaticAggregateMaf {
    cpus = { 1 }
    memory = { 1.GB * task.attempt }
  }
  withName:SomaticAggregateNetMHC {
    cpus = { 1 }
    memory = { 1.GB * task.attempt}
  }
  withName:SomaticAggregateFacets {
    cpus = { 1 }
    memory = { 1.GB * task.attempt}
  }
   withName:SomaticAggregateSv {
    cpus = { 1 }
    memory = { 1.GB * task.attempt}
  }
  withName:SomaticAggregateMetadata {
    cpus = { 1 }
    memory = { 1.GB * task.attempt}
  }   

//------------- Germline pipeline

  withName:GermlineDellyCall {
    cpus = { 1 }
    memory = { 8.GB * task.attempt }
    time = { 32.h * task.attempt }
  }
  withName:GermlineRunHaplotypecaller {
    cpus = { 2 }
    memory = { 4.GB * task.attempt }
  }
  withName:GermlineCombineHaplotypecallerVcf {
    cpus = { 1 }
    memory = { 1.GB * task.attempt }
  }
  withName:GermlineRunManta {
    cpus = { 8 }
    memory = { 1.GB * task.attempt }
  }
  withName:GermlineRunStrelka2 {
    cpus = { 8 }
    memory = { 1.GB * task.attempt }
    time = { 6.h * task.attempt }
  }
  withName:GermlineCombineChannel {
    cpus = { 1 }
    memory = { 8.GB * task.attempt }
  }
  withName:GermlineAnnotateMaf {
    cpus = { 1 }
    memory = { 6.GB * task.attempt }
  }
  withName:GermlineFacetsAnnotation {
    cpus = { 1 }
    memory = { 1.GB * task.attempt }
  }
  withName:GermlineMergeDellyAndManta {
    cpus = { 1 }
    memory = { 1.GB * task.attempt }
  }
  withName:GermlineAggregateMaf {
    cpus = { 1 }
    memory = { 1.GB * task.attempt }
  }
  withName:GermlineAggregateSv {
    cpus = { 1 }
    memory = { 1.GB * task.attempt }
  }

//------------- Quality Control

  withName:QcPileup {
    cpus = { 1 }
    memory = { 2.GB * task.attempt }
  }
  withName:QcConpair {
    cpus = { 1 }
    memory = { 1.GB * task.attempt }
  }
  withName:QcConpairAll {
    cpus = { 1 }
    memory = { 1.GB * task.attempt }
  }
  withName:QcConpairAggregate {
    cpus = { 1 }
    memory = { 1.GB * task.attempt }
  }
}
