/*
 * -------------------------------------------------
 * Nextflow config 
 * -------------------------------------------------
 * Images for every process
 * "docker://" prefix for singularity obsolete in newer NF versions
 * -------------------------------------------------
 */

 process {
  withName:FastP {
    container = "cmopipeline/fastp:1.0.0"
  }
  withName:AlignReads {
    container = "cmopipeline/fastp-bwa-samtools:2.0.0"
  }
  withName:SortBAM {
    container = "cmopipeline/bwa-samtools-gatk4-sambamba-samblaster:latest"
  }
  withName:MergeBams {
    container = "cmopipeline/bwa-samtools-gatk4-sambamba-samblaster:latest"
  }
  withName:MarkDuplicates {
    // Actually the -Xmx value should be kept lower,
    // and is set through the markdup_java_options; cf https://github.com/SciLifeLab/Sarek/blob/master/conf/resources.config#L31
    container = "broadinstitute/gatk:4.1.0.0"
  }
  withName:CreateRecalibrationTable {
    container = "broadinstitute/gatk:4.1.0.0"
  }
  withName:RecalibrateBam {
    container = "broadinstitute/gatk:4.1.0.0"
  }
  withName:Alfred {
    container = "cmopipeline/alfred:v0.1.17"
  }
  withName:CreateScatteredIntervals {
    container = "broadinstitute/gatk:4.1.0.0"
  }

//------------------- Somatic pipeline containers

  withName:SomaticDellyCall {
    container = "cmopipeline/delly:v0.8.1"
  }
  withName:RunMutect2 {
    container = "broadinstitute/gatk:4.1.0.0"
  }
  withName:RunMutect2Filter {
    container = "broadinstitute/gatk:4.1.0.0"
  }
  withName:SomaticCombineMutect2Vcf {
    container = "cmopipeline/bcftools-vt:1.1.0"
  }
  withName:SomaticRunManta {
    container = "cmopipeline/strelka2_manta:latest" 
  }
  withName:SomaticMergeDellyAndManta {
    container = "cmopipeline/bcftools-vt:1.1.0"
  }
  withName:SomaticRunStrelka2 {
    container = "cmopipeline/strelka2-manta-bcftools-vt:2.0.0"
  }
  withName:SomaticMergeStrelka2Vcfs {
    container = "cmopipeline/strelka2-manta-bcftools-vt:2.0.0"
  }
  withName:SomaticCombineChannel {
    container = "cmopipeline/bcftools-vt:1.1.0"
  }
  withName:SomaticAnnotateMaf {
    container = "cmopipeline/vcf2maf:vep88_1.2.1"
  }
  withName:DoSnpPileup {
    container = "cmopipeline/htstools:0.1.1"
  }
  withName:DoFacets {
    container = "cmopipeline/facets-htstools:2.0.0"
  } 
  withName:RunMsiSensor {
    container = "vanallenlab/msisensor:0.5"
  }
  withName:RunPolysolver {
    container = "sachet/polysolver:v4"
  }
  withName:RunLOHHLA {
    container = "cmopipeline/lohhla:1.0.2"
  } 
  withName:RunConpair {
    container = "cmopipeline/conpair:v0.3.3"
  }
  withName:RunMutationSignatures {
    container = "cmopipeline/mutation-signatures:1.1.0"
  }
  withName:FacetsAnnotation {
    container = "cmopipeline/facets-suite:1.1.0"
  } 
  withName:RunNeoantigen {
    container = "cmopipeline/neoantigen:0.0.2"
  }

//------------------- Germline pipeline containers

  withName:GermlineDellyCall {
    container = "cmopipeline/delly:v0.8.1"
  }
  withName:GermlineDellyFilter {
    container = "cmopipeline/delly:v0.8.1"
  }
  withName:GermlineRunHaplotypecaller {
    container = "broadinstitute/gatk:4.1.0.0"
  }
  withName:GermlineCombineHaplotypecallerVcf {
    container = "cmopipeline/bcftools-vt:1.1.0"
  }
  withName:GermlineRunManta {
    container = "cmopipeline/strelka2_manta:latest" 
  }
  withName:GermlineRunStrelka2 {
    container = "cmopipeline/strelka2_manta:latest"
  }
  withName:GermlineCombineChannel {
    container = "cmopipeline/bcftools-vt:1.1.0"
  }
  withName:GermlineAnnotateMaf {
    container = "cmopipeline/vcf2maf:vep88_1.2.1"
  }
  withName:GermlineMergeDellyAndManta {
    container = "cmopipeline/bcftools-vt:1.1.0"
  }
  withName:GermlineRunBcfToolsFilterOnDellyManta {
    container = "cmopipeline/bcftools-vt:1.1.0"
  }
}
