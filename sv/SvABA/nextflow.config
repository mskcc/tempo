params.genome_base =  "/juno/work/taylorlab/cmopipeline/mskcc-igenomes/igenomes/Homo_sapiens/GATK/GRCh37"

params {
    bwaIndex = "${params.genome_base}/Sequence/BWAIndex/human_g1k_v37_decoy.fasta.{amb,ann,bwt,pac,sa}"
    genomeDict = "${params.genome_base}/Sequence/WholeGenomeFasta/human_g1k_v37_decoy.dict"
    genomeFile = "${params.genome_base}/Sequence/WholeGenomeFasta/human_g1k_v37_decoy.fasta"
    genomeIndex = "${params.genome_base}/Sequence/WholeGenomeFasta/human_g1k_v37_decoy.fasta.fai"
}

report {
    enabled = true
    file = "nextflow.html"
}

trace {
    enabled = true
    fields = "task_id,hash,native_id,process,tag,name,status,exit,module,container,cpus,time,disk,memory,attempt,submit,start,complete,duration,realtime,queue,%cpu,%mem,rss,vmem,peak_rss,peak_vmem,rchar,wchar,syscr,syscw,read_bytes,write_bytes"
    file = "trace.txt"
    raw = true
}

timeline {
    enabled = true
    file = "timeline.html"
}

singularity {
    enabled = true
    autoMounts = true
    runOptions = '-B /ifs:/ifs' // not sure if this is needed?
}


executor {
    $lsf {
        clusterOptions='-sla CMOPI'
    }
}


process {
    executor = "lsf"
    withName: run_svaba {
        module = "singularity/3.3.0"

        // my custom container; newer
        // container = '/juno/work/ci/kellys5/projects/tempo-SNV-dev/svaba-dev/mskcc_svaba:dev.sif' // Version: 1.1.3 (4d7b57)

        // container from the publication; older
        container = '/juno/work/ci/kellys5/projects/tempo-SNV-dev/PCAWG_SV/weischenfeldt.svaba_workflow.1.0.0.sif' // FH Version: 134 (4a0606)
        
        cpus = 8 // 32 // hard to get 32 core jobs sometimes so run with less threads
    }
}
